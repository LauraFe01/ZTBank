# squid.conf di base per logging HTTP

# Ascolta su IPv4 su ogni interfaccia
http_port 0.0.0.0:3128


# 2) Directory di cache locale (puoi lasciarla di default oppure puntare a /var/spool/squid)
cache_dir ufs /var/spool/squid 100 16 256

# 3) Cartella dei log (convenzionalmente /var/log/squid)
#    Se hai bisogno di cambiarla, usa “cache_log” e “access_log” qui sotto.
cache_log /var/log/squid/cache.log
access_log /var/log/squid/access.log squid

# 4) Permetti tutti i client per semplicità, ma in Zero Trust probabilmente
#    vorrai servirti di ACL più restrittive.
acl localnet src all
acl Safe_ports port 80      # http
acl Safe_ports port 443     # https
acl CONNECT method CONNECT

# 5) Regole di accesso
#    - prima impedisci porte non-HTTP/HTTPS
http_access deny !Safe_ports

#    - poi consenti il CONNECT su porta 443 (per HTTPS)
http_access allow CONNECT Safe_ports

#    - infine consenti qualsiasi altra richiesta (da ACL “all”)
http_access allow all

# 6) Imposta livello di logging per debug (opzionale)
debug_options ALL,1

# 7) Timeout massimi (opzionali)
request_body_max_size 0 MB
